<!doctype html><html class=theme-light><head lang=zh-cn><meta charset=utf-8><meta http-equiv=x-ua-compatible content="IE=edge"><meta name=description content="生活足迹"><meta name=viewport content="width=device-width,initial-scale=1,shrink-to-fit=no"><meta name=keyword content><link rel="shortcut icon" href=/image/favicon.ico type=image/x-icon></link><title>git基础：cherry-pick</title><link rel=canonical href=/><link href=/scss/index.min.9a409bb34619d19be8dbedff0cd239ed66702150dc39a5cfceb3beb22128aa9b.css rel=stylesheet><script type=text/javascript src=/js/jquery.min.js></script><link rel=stylesheet href=/gitalk/gitalk.css><script src=/gitalk/gitalk.min.js></script></head><body><header class=site-header><div class=site-wrapper><nav class=site-navbar><a class=site-navbar-brand href=/>林三木</a><div class=site-navbar-menu onclick=toggleNavbarmenu(this)><div class=icon></div></div><div class=site-navbar-collapse id=site-navbarText onclick=toggleNavbarmenu(this)><span class="site-navbar-text none"></span><ul class=site-navbar-nav><li class=nav-item><a class=nav-link href=/archives.html>归档</a></li><li class=nav-item><a class=nav-link href=/about.html>我的</a></li><li class=nav-item><a class=nav-link href=/>首页</a></li></ul></div></nav><script>function toggleNavbarmenu(ele){var $parent=$(ele).parent();var className='site-navbar-open';if($parent.hasClass(className)){$parent.removeClass(className);}else{$parent.addClass(className);}}</script></div></header><div class=site-body><div class="site-wrapper clearfix"><main class=site-main><div class=site-main-wrapper><div class=single-post><div><article id=content class=md-render><h1 id=title class=title>git基础：cherry-pick</h1><h2>目录</h2><nav id=TableOfContents><ul><li><a href=#1-基本用法>1. 基本用法</a></li><li><a href=#2-额外配置>2. 额外配置</a></li><li><a href=#3-代码冲突>3. 代码冲突</a><ul><li><a href=#31-继续>3.1 继续</a></li><li><a href=#32-中止>3.2 中止</a></li><li><a href=#33-退出>3.3 退出</a></li></ul></li></ul></nav><p>对于多分支的代码库，将代码从一个分支转移到另一个分支是常见需求。这时分两种情况。一种情况是，你需要另一个分支的所有代码变动，那么就采用合并（git merge）。另一种情况是，你只需要部分代码变动（某几个提交），这时可以采用 Cherry pick。</p><p><strong>参考资料</strong></p><p><a href=http://www.ruanyifeng.com/blog/2020/04/git-cherry-pick.html>阮一峰的 git cherry-pick 教程</a></p><h2 id=1-基本用法>1. 基本用法</h2><div class=highlight><pre style=background-color:#fff;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-bash data-lang=bash>git cherry-pick &lt;commitHash&gt;

git cherry-pick &lt;commitHashA&gt; &lt;commitHashB&gt;

<span style=color:green># 转移从 A 到 B 的所有提交。(不包含A)</span>
<span style=color:green># 它们必须按照正确的顺序放置：提交 A 必须早于提交 B，否则命令将失败，但不会报错</span>
git cherry-pick &lt;commitHashA&gt;..&lt;commitHashB&gt;

<span style=color:green># 转移从 A 到 B 的所有提交。(包含A)</span>
git cherry-pick &lt;commitHashA&gt;^..&lt;commitHashB&gt;
</code></pre></div><h2 id=2-额外配置>2. 额外配置</h2><div class=highlight><pre style=background-color:#fff;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-bash data-lang=bash><span style=color:green># 打开外部编辑器，编辑提交信息</span>
<span style=color:green># -e，--edit</span>

<span style=color:green># 只更新工作区和暂存区，不产生新的提交</span>
<span style=color:green># -n，--no-commit</span>

<span style=color:green># 在提交信息的末尾追加一行(cherry picked from commit ...)，方便以后查到这个提交是如何产生的。</span>
<span style=color:green># -x</span>

<span style=color:green># 在提交信息的末尾追加一行操作者的签名，表示是谁进行了这个操作</span>
<span style=color:green># -s，--signoff</span>

<span style=color:green># 如果原始提交是一个合并节点，来自于两个分支的合并，那么 cherry pick 默认将失败，因为它不知道应该采用哪个分支的代码变动。</span>
<span style=color:green># -m配置项告诉 Git，应该采用哪个分支的变动。它的参数parent-number是一个从1开始的整数，代表原始提交的父分支编号。</span>
<span style=color:green># -m parent-number，--mainline parent-number</span>
</code></pre></div><h2 id=3-代码冲突>3. 代码冲突</h2><p>如果操作过程中发生代码冲突，cherry pick 会停下来，让用户决定如何继续操作。</p><h3 id=31-继续>3.1 继续</h3><p>用户解决代码冲突后，第一步将修改的文件重新加入暂存区（git add .），第二步使用下面的命令，让 cherry pick 过程继续执行。</p><div class=highlight><pre style=background-color:#fff;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-bash data-lang=bash>git cherry-pick --continue
</code></pre></div><h3 id=32-中止>3.2 中止</h3><p>发生代码冲突后，放弃合并，回到操作前的样子。</p><div class=highlight><pre style=background-color:#fff;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-bash data-lang=bash>git cherry-pick --abort
</code></pre></div><h3 id=33-退出>3.3 退出</h3><p>发生代码冲突后，退出 cherry pick，但是不回到操作前的样子。</p><div class=highlight><pre style=background-color:#fff;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-bash data-lang=bash>git cherry-pick --quit
</code></pre></div></article></div><div class=pagination-single><div class=btn>上一篇：<a class=previous href=https://linjiasen63.github.io/posts/programming/base/git/merge.html>
git基础：合并部分内容</a></div><div class=btn>下一篇：<a class=next href=https://linjiasen63.github.io/posts/programming/mysql/tutorial-basic.html>
60min入门mysql</a></div></div></div><div id=pageScrollTop class=page-scroll-top><span class=arr></span><span class=txt>顶部</span></div><script>var $pageScrollTop=$("#pageScrollTop");$pageScrollTop.hide();$pageScrollTop.on('click',function(){$('html,body').animate({scrollTop:'0px'},300);;});$(document).scroll(function(){var scroTop=$(document).scrollTop();var contentHeight=$(document).height();if(scroTop>contentHeight*0.2){$pageScrollTop.show();}else{$pageScrollTop.hide();}});</script></div></main><aside class=site-aside><section class=widget><form id=search action=https://linjiasen63.github.io/search.html method=get accept-charset=utf-8 target=_blank _lpchecked=1><input type=text name=wd maxlength=20 placeholder=Search>
<input type=hidden name=sitesearch value=https://linjiasen63.github.io>
<button type=submit class="submit icon-search">搜索</button></form></section><section class=widget><h3 class=widget-title><a href=/>最新内容</a></h3><ul class=widget-list><li><a href=https://linjiasen63.github.io/posts/programming/front/layout/label-script.html title=前端系列：script标签的defer、async属性>前端系列：script标签的defer、async属性</a></li><li><a href=https://linjiasen63.github.io/posts/life/stories/2021/01/29-0.html title=小故事：沉没成本>小故事：沉没成本</a></li><li><a href=https://linjiasen63.github.io/posts/life/stories/2021/01/28-0.html title=小故事：油漆工算法>小故事：油漆工算法</a></li><li><a href=https://linjiasen63.github.io/posts/life/common/resume.html title=优秀简历的书写规范>优秀简历的书写规范</a></li><li><a href=https://linjiasen63.github.io/posts/life/interpersonal-relationship/rules.html title=人际关系>人际关系</a></li></ul></section><section class=widget><h3 class=widget-title><a href=/categories.html>内容分类</a></h3><ul class=widget-list><li><a href=https://linjiasen63.github.io/categories/%E5%B0%8F%E6%95%85%E4%BA%8B.html>小故事</a></li><li><a href=https://linjiasen63.github.io/categories/%E5%B7%A5%E4%BD%9C.html>工作</a></li><li><a href=https://linjiasen63.github.io/categories/%E7%94%9F%E6%B4%BB.html>生活</a></li><li><a href=https://linjiasen63.github.io/categories/%E7%BC%96%E7%A0%81%E4%BA%BA%E7%94%9F.html>编码人生</a></li></ul></section><section class=widget><h3 class=widget-title><a href=/tags.html>内容标签</a></h3><ul class=widget-list><li><a href=https://linjiasen63.github.io/tags/git.html>git</a></li><li><a href=https://linjiasen63.github.io/tags/java%E5%AD%A6%E4%B9%A0.html>java学习</a></li><li><a href=https://linjiasen63.github.io/tags/%E4%BA%BA%E9%99%85%E5%85%B3%E7%B3%BB.html>人际关系</a></li><li><a href=https://linjiasen63.github.io/tags/%E5%89%8D%E7%AB%AF%E9%9D%A2%E8%AF%95.html>前端面试</a></li><li><a href=https://linjiasen63.github.io/tags/%E6%8A%80%E8%83%BD.html>技能</a></li></ul></section></aside></div></div><footer class=site-footer><div>&copy; 2021
<a href=https://linjiasen63.github.io>林三木的博客 By linjiasen63</a></div><script type=text/javascript src=/js/mermaid.min.js></script><script>Array.from(document.getElementsByClassName("language-mermaid")).forEach(function(el){el.parentElement.outerHTML=`<div class="mermaid">${el.innerText}</div>`;});mermaid.initialize({startOnLoad:true});setTimeout(function(){Array.from(document.getElementsByTagName("polygon")).forEach(function(el){var nodeValue=el.attributes.transform.nodeValue;nodeValue=nodeValue.replace(/\d\d*\.?\d*/ig,function(num){console.log(num);return num+'px';});console.log(nodeValue,$(el));$(el).css('transform','scaleY(0.68) '+nodeValue);});},100)</script></footer></body></html>