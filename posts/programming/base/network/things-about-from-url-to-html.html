<!doctype html><html class=theme-light><head lang=zh-cn><meta charset=utf-8><meta http-equiv=x-ua-compatible content="IE=edge"><meta name=description content="生活足迹"><meta name=viewport content="width=device-width,initial-scale=1,shrink-to-fit=no"><meta name=keyword content><link rel="shortcut icon" href=/image/favicon.ico type=image/x-icon></link><title>浏览器输入url到网页展示期间发生了什么？</title><link rel=canonical href=/><link href=/scss/index.min.e14f6c4a755759a9fa87e27fa13d9356d25bc5216d22b89643b8f9babecf89b9.css rel=stylesheet><script type=text/javascript src=/js/jquery.min.js></script><link rel=stylesheet href=/gitalk/gitalk.css><script src=/gitalk/gitalk.min.js></script></head><body><header class=site-header><div class=site-wrapper><nav class=site-navbar><a class=site-navbar-brand href=/>林三木</a><div class=site-navbar-menu onclick=toggleNavbarmenu(this)><div class=icon></div></div><div class=site-navbar-collapse id=site-navbarText onclick=toggleNavbarmenu(this)><span class="site-navbar-text none"></span><ul class=site-navbar-nav><li class=nav-item><a class=nav-link href=/archives.html>归档</a></li><li class=nav-item><a class=nav-link href=/about.html>我的</a></li><li class=nav-item><a class=nav-link href=/>首页</a></li></ul></div></nav><script>function toggleNavbarmenu(c){var a=$(c).parent(),b='site-navbar-open';a.hasClass(b)?a.removeClass(b):a.addClass(b)}</script></div></header><div class=site-body><div class="site-wrapper clearfix"><main class=site-main><div class=site-main-wrapper><div class=single-post><div><article id=content class=md-render><h1 id=title class=title>浏览器输入url到网页展示期间发生了什么？</h1><h2>目录</h2><nav id=TableOfContents><ul><li><a href=#1-概要流程>1. 概要流程</a></li><li><a href=#2-详细解释>2. 详细解释</a><ul><li><a href=#21-dns查找确定ip>2.1 DNS查找，确定IP</a></li><li><a href=#22-三次握手建立链接>2.2 三次握手，建立链接</a></li><li><a href=#23-客户端发送请求>2.3 客户端发送请求</a></li><li><a href=#24-服务端返回响应>2.4 服务端返回响应</a></li><li><a href=#25--四次握手销毁链接>2.5 四次握手，销毁链接</a></li><li><a href=#26-浏览器解析内容>2.6 浏览器解析内容</a></li></ul></li></ul></nav><h2 id=1-概要流程>1. 概要流程</h2><ul><li>DNS查找，确定ip</li><li>三次握手，建立链接</li><li>客户端发送请求</li><li>服务端返回响应</li><li>四次挥手，销毁链接</li><li>浏览器解析内容</li></ul><h2 id=2-详细解释>2. 详细解释</h2><h3 id=21-dns查找确定ip>2.1 DNS查找，确定IP</h3><h4 id=211-概述>2.1.1 概述</h4><ol><li>逐一向“浏览器”、“操作系统”、“路由器”询问：是否知道ip地址？若知道则返回；</li><li>从本地系统向本地DNS服务器（电脑上网络配置中的dns，如8.8.8.8）发起迭代询问；</li></ol><h4 id=212-详情>2.1.2 详情</h4><p>查询IP（有两种方式，一般使用以下方式，减少根服务器的压力）</p><p>方式一：</p><pre><code>    1. “操作系统” -&gt; “本地DNS服务器”查询
    2. “本地DNS服务器” -&gt; “根域名服务器”（ipv4，全球只有13个）
    3. “本地DNS服务器” -&gt; “顶级域名服务器”
      1. 通用：如com、edu等
      2. 地区：如cn、jp、等
      3. 特殊：如
    4. “本地DNS服务器” -&gt; “权威域名服务器”（饲服务器）
</code></pre><p>方式二：（现实中几乎不会使用到）</p><pre><code>    1. “操作系统” -&gt; “本地DNS服务器”查询
    2. “本地DNS服务器” -&gt; “根域名服务器”
    3. “根域名服务器” -&gt; “顶级域名服务器”
    4. “顶级域名服务器” -&gt; “权威域名服务器”
    5. 然后把结果逐一返回
</code></pre><h3 id=22-三次握手建立链接>2.2 三次握手，建立链接</h3><ol><li>client发起建立连接，发送同步序列号：随机生成的x（本次发送信息开始的编号，以后逐次+1）；</li><li>sever收到client内容，返回client下次的同步序列号为（x+1，因为已发送了一个包），然后生成server对应的同步序列号y；</li><li>clent收到server内容，发送确认包（server下次的同步序列号为y+1）；</li></ol><pre><code class=language-mermaid data-lang=mermaid>sequenceDiagram
    Client -&gt;&gt; Server: SYN=1，seq=x（x是随机生成的）
    Server -&gt;&gt; Client: ACK=1, ack=x+1；SYN=1，seq=y（y是随机生成的）
    Client -&gt;&gt; Server: ACK=1，ack=y+1
</code></pre><p>为什么是三次握手而不是二次？原因：保证连接是尽量可靠的。</p><h3 id=23-客户端发送请求>2.3 客户端发送请求</h3><div class=highlight><pre style=background-color:#fff;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-html data-lang=html>// 请求行
HTTP/1.1 baidu.com GET
// 首部字段
Content-Type: text/html; charset=utf-8

// 请求体

</code></pre></div><h3 id=24-服务端返回响应>2.4 服务端返回响应</h3><div class=highlight><pre style=background-color:#fff;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-html data-lang=html>// 响应行
HTTP/1.1 200 GET
// 首部字段
Content-Type: text/html; charset=utf-8

// 响应体

</code></pre></div><h3 id=25--四次握手销毁链接>2.5 四次握手，销毁链接</h3><pre><code class=language-mermaid data-lang=mermaid>sequenceDiagram
    Client -&gt;&gt; Server: FIN=1，seq=m
    Server -&gt;&gt; Client: ACK=1, ack=m+1
    Server -&gt;&gt; Client: FIN=1, seq=n
    Client -&gt;&gt; Server: ACK=1，ack=n+1
</code></pre><h3 id=26-浏览器解析内容>2.6 浏览器解析内容</h3><ul><li>解析html生成dom树</li><li>解析css生成css规则树</li><li>通过dom树与css规则树生成渲染树</li><li>通过渲染树生成布局树，计算元素的位置</li></ul><p>解析过程并非串行的，在解析css时，同时可以解析html。但是在解析执行js脚本时，会停止解析html与css（即出现解析问题）</p></article></div><div class=pagination-single><div class=btn>上一篇：<a class=previous href=https://linjiasen63.github.io/posts/programming/base/linux/vim-basic-usage.html>
快速入门vim的基本操作</a></div><div class=btn>下一篇：<a class=next href=https://linjiasen63.github.io/posts/programming/java/java-se/functional.html>
java基础系列：函数编程</a></div></div></div><div id=pageScrollTop class=page-scroll-top><span class=arr></span><span class=txt>顶部</span></div><script>var $pageScrollTop=$("#pageScrollTop");$pageScrollTop.hide(),$pageScrollTop.on('click',function(){$('html,body').animate({scrollTop:'0px'},300)}),$(document).scroll(function(){var a=$(document).scrollTop(),b=$(document).height();a>b*.2?$pageScrollTop.show():$pageScrollTop.hide()})</script></div></main><aside class=site-aside><section class=widget><form id=search action=https://linjiasen63.github.io/search.html method=get accept-charset=utf-8 target=_blank _lpchecked=1><input type=text name=wd maxlength=20 placeholder=Search>
<input type=hidden name=sitesearch value=https://linjiasen63.github.io>
<button type=submit class="submit icon-search">搜索</button></form></section><section class=widget><h3 class=widget-title><a href=/>最新内容</a></h3><ul class=widget-list><li><a href=https://linjiasen63.github.io/posts/programming/front/builder/babel/ast-basic.html title=前端系列：babel中ast简介>前端系列：babel中ast简介</a></li><li><a href=https://linjiasen63.github.io/posts/programming/algorithm/tutorial-basic.html title=数据结构与算法：初识>数据结构与算法：初识</a></li><li><a href=https://linjiasen63.github.io/posts/programming/front/logic/error-monitor.html title="前端系列： JS 错误监控">前端系列： JS 错误监控</a></li><li><a href=https://linjiasen63.github.io/posts/programming/front/layout/label-script.html title=前端系列：script标签的defer、async属性>前端系列：script标签的defer、async属性</a></li><li><a href=https://linjiasen63.github.io/posts/life/stories/2021/01/29-0.html title=小故事：沉没成本>小故事：沉没成本</a></li></ul></section><section class=widget><h3 class=widget-title><a href=/categories.html>内容分类</a></h3><ul class=widget-list><li><a href=https://linjiasen63.github.io/categories/%E5%B0%8F%E6%95%85%E4%BA%8B.html>小故事</a></li><li><a href=https://linjiasen63.github.io/categories/%E5%B7%A5%E4%BD%9C.html>工作</a></li><li><a href=https://linjiasen63.github.io/categories/%E7%94%9F%E6%B4%BB.html>生活</a></li><li><a href=https://linjiasen63.github.io/categories/%E7%BC%96%E7%A0%81%E4%BA%BA%E7%94%9F.html>编码人生</a></li></ul></section><section class=widget><h3 class=widget-title><a href=/tags.html>内容标签</a></h3><ul class=widget-list><li><a href=https://linjiasen63.github.io/tags/git.html>git</a></li><li><a href=https://linjiasen63.github.io/tags/java%E5%AD%A6%E4%B9%A0.html>java学习</a></li><li><a href=https://linjiasen63.github.io/tags/%E4%BA%BA%E9%99%85%E5%85%B3%E7%B3%BB.html>人际关系</a></li><li><a href=https://linjiasen63.github.io/tags/%E5%89%8D%E7%AB%AF%E9%9D%A2%E8%AF%95.html>前端面试</a></li><li><a href=https://linjiasen63.github.io/tags/%E6%8A%80%E8%83%BD.html>技能</a></li></ul></section></aside></div></div><footer class=site-footer><div>&copy; 2021
<a href=https://linjiasen63.github.io>林三木的博客 By linjiasen63</a></div><script type=text/javascript src=/js/mermaid.min.js></script><script>Array.from(document.getElementsByClassName("language-mermaid")).forEach(function(a){a.parentElement.outerHTML=`<div class="mermaid">${a.innerText}</div>`}),mermaid.initialize({startOnLoad:!0}),setTimeout(function(){Array.from(document.getElementsByTagName("polygon")).forEach(function(b){var a=b.attributes.transform.nodeValue;a=a.replace(/\d\d*\.?\d*/ig,function(a){return console.log(a),a+'px'}),console.log(a,$(b)),$(b).css('transform','scaleY(0.68) '+a)})},100)</script><link href=/scss/index.min.e14f6c4a755759a9fa87e27fa13d9356d25bc5216d22b89643b8f9babecf89b9.css rel=stylesheet></footer></body></html>